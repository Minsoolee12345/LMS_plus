<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>ë‚´ ìˆ˜ê°•ìƒ ê´€ë¦¬</title>

  <!-- ê³µí†µ head í”„ë˜ê·¸ë¨¼íŠ¸ -->
  <th:block th:insert="~{layout :: head}"></th:block>

  <!-- í˜ì´ì§€ ì „ìš© CSS (ê³µí†µë³´ë‹¤ ë’¤ìª½) -->
  <style>
    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ ìƒ‰ìƒ ë³€ìˆ˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    :root{
      --bs-primary:#337ab7;
      --bs-primary-dark:#2e6da4;
      --bs-danger:#e74c3c;
      --bs-danger-dark:#c0392b;
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ ê¸°ë³¸ ë ˆì´ì•„ì›ƒ & íƒ€ì´í¬ â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    body{font-family:Arial,Helvetica,sans-serif;padding:20px;background:#f9f9fb}
    h1,h2{color:var(--bs-primary);margin:0 0 20px}

    .layout{max-width:940px;margin:0 auto}
    .content{padding:16px}

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ ê°•ì˜ ì¹´ë“œ â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .course{
      margin-bottom:40px;
      border:1px solid var(--bs-primary);
      border-radius:8px;
      padding:20px;
      background:#fff
    }
    .course-header{
      display:flex;
      justify-content:space-between;
      align-items:center
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ í…Œì´ë¸” â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    table{width:100%;border-collapse:collapse;margin-top:16px}
    th,td{border:1px solid #ccc;padding:8px;text-align:center}
    thead th{background:var(--bs-primary);color:#fff}
    tbody tr:nth-child(odd){background:#fafafa}

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë²„íŠ¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .btn{
      border:none;
      border-radius:4px;
      padding:6px 12px;
      cursor:pointer;
      font-weight:600;
      transition:background-color .2s,color .2s
    }
    .btn-primary{
      background:var(--bs-primary);
      color:#fff
    }
    .btn-primary:hover{background:var(--bs-primary-dark)}
    .btn-danger{
      background:var(--bs-danger);
      color:#fff
    }
    .btn-danger:hover{background:var(--bs-danger-dark)}

    /* ì¸ë¼ì¸ í¼ ìŠ¤íƒ€ì¼ */
    form.inline{display:inline}

    /* ë§í¬ ìƒ‰ìƒ */
    a{color:var(--bs-primary)}
    a:hover{color:var(--bs-primary-dark)}
  </style>
</head>

<body>
  <div th:replace="~{layout :: header}"></div>

  <div class="layout">
    <main class="content">
      <h1>ğŸ”„ ë‚´ ê°•ì˜Â·ì˜ìƒ ê´€ë¦¬</h1>

      <div th:each="lec : ${lectures}" class="lecture">
        <div class="lecture-header">
          <h2 th:text="'ê°•ì˜ ' + ${lec.lectureNo} + ' â€“ ' + ${lec.title}">ê°•ì˜ ì œëª©</h2>

          <!-- ê³¼ëª© ì‚­ì œ -->
          <form th:action="@{/lecture/delete/{lectureNo}(lectureNo=${lec.lectureNo})}"
                method="post"
                onsubmit="return confirm('ì •ë§ ì´ ê³¼ëª©ê³¼ ëª¨ë“  ì²¨ë¶€ ì˜ìƒì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
            <button type="submit" class="btn btn-danger">ê³¼ëª© ì‚­ì œ</button>
          </form>
        </div>

        <table>
          <thead>
            <tr>
              <th>ì˜ìƒë²ˆí˜¸</th>
              <th>íŒŒì¼ëª…</th>
              <th>ê³µê°œ ìƒíƒœ</th>
              <th>ë³€ê²½</th>
              <th>ì‚­ì œ</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="vid : ${videosByLecture[lec.lectureNo]}">
              <td th:text="${vid.videoNo}">1</td>
              <td th:text="${vid.videoPath}">video.mp4</td>
              <td th:text="${vid.visibility == 1 ? 'ì „ì²´ ê³µê°œ' : vid.visibility == 2 ? 'ë¶€ë¶„ ê³µê°œ' : 'ë¹„ê³µê°œ'}">
                ê³µê°œ ìƒíƒœ
              </td>
              <td>
                <!-- ê³µê°œ ìƒíƒœ ë³€ê²½ -->
                <form th:action="@{/instructor/lectures/manage/video/update}"
                      method="post" class="inline">
                  <input type="hidden" name="videoNo" th:value="${vid.videoNo}">
                  <select name="visibility">
                    <option value="1" th:selected="${vid.visibility==1}">ì „ì²´ ê³µê°œ</option>
                    <option value="2" th:selected="${vid.visibility==2}">ë¶€ë¶„ ê³µê°œ</option>
                    <option value="0" th:selected="${vid.visibility==0}">ë¹„ê³µê°œ</option>
                  </select>
                  <button type="submit" class="btn btn-primary" style="padding:4px 10px">ì €ì¥</button>
                </form>
              </td>
              <td>
                <!-- ì˜ìƒ ì‚­ì œ -->
                <form th:action="@{/instructor/lectures/manage/video/delete}"
                      method="post"
                      onsubmit="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');"
                      class="inline">
                  <input type="hidden" name="videoNo" th:value="${vid.videoNo}">
                  <button type="submit" class="btn btn-danger" style="padding:4px 10px">ì‚­ì œ</button>
                </form>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <p><a th:href="@{/}">â† í™ˆìœ¼ë¡œ</a></p>
    </main>
  </div>
</body>
</html>